# Railway.app Configuration for Yoto Smart Stream
# https://docs.railway.app/reference/config-as-code

[build]
# Build the React frontend before deploying
# Use --include=dev to ensure devDependencies (including @types/react) are installed
buildCommand = "cd frontend && npm install --include=dev && npm run build && cd .."

[deploy]
# Health check endpoint
healthcheckPath = "/api/health"
healthcheckTimeout = 100

# Persistent volumes - survive deployments and restarts
# Stores: SQLite database, stream queues, OAuth tokens
# Audio files migrated to Railway Bucket (S3-compatible storage) for cost efficiency
[[deploy.volumes]]
name = "data"
mountPath = "/data"
